{"repo_token":"foo","source_files":[{"name":"\/Users\/shared-hat\/Documents\/develop\/coveralls-kit\/script\/coveralls.php","source":"<?php\n\nnamespace coveralls\\example;\n\nrequire_once __DIR__ . '\/..\/vendor\/autoload.php';\n\nuse coveralls\\JSONFileBuilder;\nuse coveralls\\jsonfile\\Coverage;\nuse coveralls\\jsonfile\\SourceFile;\n\n\n\/**\n * Get the code coverage\n *\/\nxdebug_start_code_coverage(XDEBUG_CC_UNUSED | XDEBUG_CC_DEAD_CODE);\n\n$argv = array('..\/vendor\/bin\/pho', '--reporter', 'spec');\n\nrequire_once __DIR__ . \"\/..\/vendor\/bin\/pho\";\n\n$result = xdebug_get_code_coverage();\nxdebug_stop_code_coverage();\n\n\n\/**\n * Generate a json file\n *\/\n$builder = new JSONFileBuilder();\n$builder->token('foo');\n\nforeach ($result as $file => $coverage) {\n    if (preg_match('\/vendor\/', $file) || preg_match('\/spec\/', $file)) {\n        continue;\n    }\n\n    $source = new SourceFile($file);\n    $coverages = $source->getCoverages();\n\n    foreach ($coverage as $line => $status) {\n        if ($status === 1) {\n            $coverages->add(Coverage::executed(1));\n        } else if ($status === -1) {\n            $coverages->add(Coverage::unused(1));\n        }\n    }\n}\n\n$builder->addSource($source);\n$builder->build()->saveAs(__DIR__ . '\/coverage.json');\n","coverage":[1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]}],"run_at":"2014-03-22 13:07:53 +0900"}